@PART[restock-engine-125-valiant]:NEEDS[ReStockPlus]:AFTER[ReStockPlus]
{
  @title = Chryslus-3DS "Polaris" Liquid Engine
  @description = Basic compact engine design. Has the ability to gimbal.
  real_title = Juno S3D
  real_manufacturer = Rocketdyne
  %tags = LVT15 valiant Juno II 2 S3D LR79

  //Physical
  //Model nozzle diameter 0.425m, bulkhead is 1.25m on standard mount.
  //IRL nozzle diameter is 1.16m according to RO. 0.725m in KSP terms
  // Required scaling is 0.425mx1.7x.
  //1.7x x 1.25m bulkhead is 2.125m. Round down to  1.5x scaling to get to 1.875m
  // Note that BDB Juno is scaled at 1.5m. Need to use the compact mount.

  @rescaleFactor = 1.5
  @mass = 1.25 //BDB values

  //Nodes, physical variants
  @MODULE[ModulePartVariants]
  {
    @VARIANT[Size1]
    {
      @displayName = 1.875m
    }
  }

  @MODULE[ModuleEnginesFX] //BDB values
  {
    @maxThrust = 190

    !atmosphereCurve {}
    atmosphereCurve
    {
      key = 0 282
			key = 1 248
			key = 7 0.001
    }
  }

  //FX
  !EFFECTS {}
  EFFECTS
  {
    engage
    {
      AUDIO
      {
        channel = Ship
        clip = sound_vent_medium
        volume = 1.0
        pitch = 2.0
        loop = false
      }
    }
    flameout
    {
      AUDIO
      {
        channel = Ship
        clip = sound_explosion_low
        volume = 1.0
        pitch = 2.0
        loop = false
      }
    }
    fx-valiant-running
    {
      AUDIO
      {
        channel = Ship
        clip = sound_rocket_hard
        volume = 0.0 0.0
        volume = 0.01 0.4
        volume = 1.0 1.0
        pitch = 0.0 0.2
        pitch = 0.01 0.6
        pitch = 1.0 1.8
        loop = true
      }
      MODEL_MULTI_PARTICLE
      {
        name = turbo
        modelName = ReStock/FX/restock-fx-valiant-turbo-1
        transformName = fxTransformTurbo
        emission = 0.0 0.0
        emission = 0.01 0.1
        emission = 0.075 0.25
        emission = 1.0 1.0
        speed = 0.0 0.35
        speed = 1.0 1.0
        localScale = 3,3,3
      }
      MODEL_MULTI_PARTICLE
      {
        name = core
        modelName = ReStock/FX/restock-fx-valiant-core-1
        transformName = fxTransformCore
        emission = 0.0 0.0
        emission = 0.01 0.1
        emission = 0.075 0.25
        emission = 1.0 1.0
        speed = 0.0 0.35
        speed = 1.0 1.0
        localScale = 2,2,2
      }
      MODEL_MULTI_PARTICLE
      {
        name = plume
        modelName = ReStock/FX/restock-fx-valiant-plume-1
        transformName = fxTransformPlume
        emission = 0.0 0.0
        emission = 0.01 0.1
        emission = 0.075 0.25
        emission = 1.0 1.0
        speed = 0.0 0.35
        speed = 1.0 1.0
        localScale = 2,2,2
      }
      PREFAB_PARTICLE
      {
        prefabName = fx_smokeTrail_light
        transformName = smokePoint
        emission = 0.0 0.0
        emission = 0.05 0.0
        emission = 0.075 0.25
        emission = 1.0 1.25
        speed = 0.0 0.25
        speed = 1.0 1.0
        localOffset = 0, 0, 0
      }
    }
  }
}

@PART[restock-engine-125-valiant]:NEEDS[RealPlume,SmokeScreen]:BEFORE[zRealPlume]
{
  @EFFECTS
  {
    !fx-valiant-running {}
  }
  @PLUME
  {
    @plumeScale = 0.6
    @flameScale = 0.6

    @flarePosition = 0,0.3,0
    @flareScale = 0.05
  }
}
